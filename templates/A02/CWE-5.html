<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CWE-5: Information Exposure</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cwe-22.css') }}">
    <style>
        form {
            background-color: #f9f9f9;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            max-width: 500px;
            margin: 20px auto;
        }
        input[type=text], input[type=password] {
            width: 100%;
            padding: 12px;
            margin: 8px 0 16px;
            display: inline-block;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button[type=submit] {
            width: 100%;
            background-color: #007bff;
            color: white;
            padding: 12px 20px;
            margin: 8px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button[type=submit]:hover {
            background-color: #0056b3;
        }
        label {
            font-weight: bold;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        {% for cwe in cwes %}
            {% if cwe.id == 'CWE-5' %}
                <h2>{{ cwe.id }}: {{ cwe.name }}</h2>
                <p class="creator-info">제작자 : {{ cwe.who }}</p>
            {% endif %}
        {% endfor %}
        <hr>
        <p>로그인 정보를 입력하세요. 이 폼은 암호화되지 않은 채널(HTTP)을 통해 전송될 경우, 네트워크 상에서 데이터가 노출될 수 있습니다.</p>
        
        <form method="POST" action="/A02/cwe-5">
            <label for="username"><b>사용자 이름</b></label>
            <input type="text" placeholder="사용자 이름 입력" name="username" required>

            <label for="password"><b>비밀번호</b></label>
            <input type="password" placeholder="비밀번호 입력" name="password" required>

            <button type="submit" style="width: 100%;">로그인</button>
        </form>

        {% if request.method == 'POST' %}
            {% if request.form.get('username') == 'test' and request.form.get('password') == 'test' %}
                <div style="margin-top: 15px; padding: 10px; background-color: #d4edda; color: #155724; border-radius: 4px; text-align: center;">
                    로그인이 되었습니다.
                </div>
            {% else %}
                <div style="margin-top: 15px; padding: 10px; background-color: #f8d7da; color: #721c24; border-radius: 4px; text-align: center;">
                    로그인 실패
                </div>
            {% endif %}
        {% endif %}
        <hr>

        <a href="/A02">A02 페이지로 돌아가기</a> <button id="openModalBtn">설명 보기</button>

        <!-- 설명 팝업(모달) -->
        <div id="descriptionModal" class="modal">
            <div class="modal-content">
                <span class="close-button">&times;</span>
                {% for cwe in cwes %}
                    {% if cwe.id == 'CWE-5' %}
                        <h2>{{ cwe.id }} 상세 설명</h2>
                        <p>{{ cwe.description }}</p>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>

    <script>
        // 팝업(모달) 관련 스크립트
        var modal = document.getElementById("descriptionModal");
        var btn = document.getElementById("openModalBtn");
        var span = document.getElementsByClassName("close-button")[0];

        // "설명 보기" 버튼 클릭 시 팝업 열기
        btn.onclick = function() {
            modal.style.display = "block";
        }

        // 'x' 버튼 클릭 시 팝업 닫기
        span.onclick = function() {
            modal.style.display = "none";
        }

        // 팝업 외부 영역 클릭 시 팝업 닫기
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>
</html>